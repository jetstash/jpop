!function(t){function o(o,e){var i={form:null,type:"banner",position:"top",style:!1,zindex:8675309,show:!1,delay:500,scroll:!1,title:"Subscribe to our email list",button:"Submit",thanks:"Thanks"};this.el=o,this.loaded=!1,this.options=t.extend(i,e),this.output={error:!1,message:this.options.thanks},this.endpoint="https://api.jetstash.com/v1/form/submit",this.message={incorrectType:"Incorrect type set. Check your options.",incorrectForm:"You must pass your form id as an option",generalError:"Something went wrong, please refresh and try again."}}o.prototype.run=function(){if(this.loadListeners(),null!==this.options.form)switch(this.options.type){case"banner":this.loadBanner();break;case"popover":this.loadPopOver();break;default:console.log(this.message.incorrectType)}else console.log(this.message.incorrectForm)},o.prototype.loadListeners=function(){var o=this;t("body").on("submit","form#jpop",function(e){var i=t("#jpop-email").val(),s=t("form#jpop").find("button");e.preventDefault(),o.verifyData(i),o.output.error===!1?(s.attr("disabled",!0),t.post(o.endpoint,{form:o.options.form,email:i},function(t){t=JSON.parse(t),t.success===!0||(t.success===!1?(o.output={error:!0,message:t.message},o.appendError(),s.attr("disabled",!1)):(o.output={error:!0,message:o.message.generalError},o.appendError(),s.attr("disabled",!1)))})):o.appendError()}),t("body").on("click","#jpop-dismiss",function(o){t(this).data("type")})},o.prototype.verifyData=function(t){var o=/\S+@\S+\.\S+/;""===t&&(this.output={error:!0,message:this.message.emptyEmail}),!1===o.test(t)&&(this.output={error:!0,message:this.message.invalidEmail})},o.prototype.appendError=function(){t("#jpop-error").empty().append("<p>"+this.output.message+"</p>")},o.prototype.inject=function(o){var e,i,s=this;this.options.show?(this.el.append(o),this.loaded=!0):this.options.scroll?t(window).on("scroll mousewheel",function(){s.loaded||(s.el.append(o),s.loaded=!0)}):(e=setInterval(function(){s.el.append(o),s.load=!0,i()},this.options.delay),i=function(){clearInterval(e)})},o.prototype.loadBanner=function(){var t=this.htmlBanner();this.inject(t)},o.prototype.loadPopOver=function(){var t=this.htmlPopOver();this.inject(t)},o.prototype.htmlBanner=function(){var t="top"===this.options.position?"slideInDown":"slideInUp";return['<div id="jpop-banner" data-type="banner" class="jpop-banner animated '+t+'" style="position:fixed;z-index:'+this.options.zindex+";width:100%;left:0;right:0;"+this.options.position+':0;">','<div class="jpop-left">','<h2 class="jpop-cta">'+this.options.title+"</h2>","</div>",'<div class="jpop-right">',this.htmlForm(),"</div>","</div>"].join("\n")},o.prototype.htmlPopOver=function(){return['<div id="jpop-popover" data-type="popover" class="jpop-popover animated zoomIn" style="position:fixed;z-index:'+this.options.zindex+';top:0;right:0;bottom:0;left:0">','<div class="jpop-content">','<h1 class="jpop-cta">'+this.options.title+"</h1>",this.htmlForm(),"</div>","</div>",'<div class="jpop-backdrop animated fadeIn"></div>'].join("\n")},o.prototype.htmlForm=function(){return['<form id="jpop" role="form" class="jpop-form">','<label class="sr-only" for="jpop-email">Email</label>','<input type="email" id="jpop-email" name="email" placeholder="email" required>','<div id="jpop-error" class="jpop-error"></div>','<button class="jpop-btn btn-default" type="submit">'+this.options.button+"</button>","</form>"].join("\n")},t.fn.jpop=function(t){var e=new o(this,t);e.run()}}(jQuery);